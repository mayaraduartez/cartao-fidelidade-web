<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>Unidades - Sabor Caseiro</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">

  <link rel="stylesheet" href="/style/style2.css">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Playfair+Display&display=swap" rel="stylesheet">
</head>

<body class="fundo-amarelo">
  <div class="container mt-4">
    <div class="text-center mb-4">
      <img src="../img/logoRes.png" alt="Logo Sabor Caseiro" style="width: 100px; height: auto;">
      <h1 class="mt-2">Restaurantes - Sabor Caseiro</h1>
    </div>

    <div class="row">
      <!-- COLUNA ESQUERDA - Lista e AÃ§Ãµes -->
      <div class="col-md-6 mb-4">
        <div class="p-3 h-100">
          <h2 class="h5">Unidades Atuais</h2>

          <ul class="list-group mb-3">
            <% restaurantes.forEach(rest => { %>
              <li class="list-group-item">ğŸ“ <%= rest.endereco %> - <%= rest.nome %></li>
            <% }) %>
          </ul>

          <!-- SELECT USANDO ID E NÃƒO INDEX -->
          <select id="unitSelect" class="custom-select mb-3">
            <% restaurantes.forEach(rest => { %>
              <option value="<%= rest.id %>"><%= rest.endereco %> - <%= rest.nome %></option>
            <% }) %>
          </select>

          <!-- FORM EDITAR -->
          <form id="formEditar" method="POST" class="d-inline-block w-50 pr-1">
            <button type="submit" id="btnEditar" class="btn btn-warning btn-block" disabled>Editar</button>
          </form>

          <!-- FORM EXCLUIR -->
          <form id="formExcluir" method="POST" class="d-inline-block w-50 pl-1">
            <button type="submit" id="btnExcluir" class="btn btn-danger btn-block" disabled>Excluir</button>
          </form>
        </div>
      </div>

      <!-- COLUNA DIREITA - Cadastro -->
      <div class="col-md-6 mb-4">
        <div class="p-3 h-100">
          <h2 class="h5">Cadastrar Nova Unidade</h2>

          <form action="/restaurantes" method="POST">
            <div class="form-group">
              <label for="nome">Nome da Unidade:</label>
              <input type="text" id="nome" name="nome" class="form-control" placeholder="Ex: Unidade Leste" required>
            </div>

            <div class="form-group">
              <label for="endereco">EndereÃ§o:</label>
              <input type="text" id="endereco" name="endereco" class="form-control" placeholder="Ex: Rua Tal, 999" required>
            </div>

            <button type="submit" class="btn btn-success btn-block">Cadastrar Unidade</button>
            <a href="/admin/listarClientes">Ver lista de clientes</a>
          </form>
        </div>
      </div>
    </div>
  </div>

<script>
  const select = document.getElementById("unitSelect");
  const formEditar = document.getElementById("formEditar");
  const formExcluir = document.getElementById("formExcluir");
  const btnEditar = document.getElementById("btnEditar");
  const btnExcluir = document.getElementById("btnExcluir");

  // Ao trocar de unidade -> ativa botÃµes e insere rotas com ID
  select.addEventListener("change", () => {
    const id = select.value;

    formEditar.action = `/restaurantes/${id}/editar`;
    formExcluir.action = `/restaurantes/${id}/excluir`;

    btnEditar.disabled = false;
    btnExcluir.disabled = false;
  });
</script>

</body>
</html>
